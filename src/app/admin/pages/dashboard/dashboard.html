<div class="dashboard-container">
  <h1>Panel de Control - AetherEye</h1>
  
  <div *ngIf="loading" class="loading">
    Cargando datos...
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error && stats" class="dashboard-content">
    <div class="kpi-cards">
      <div class="kpi-card">
        <h3>{{ stats!.totalInsumos }}</h3>
        <p>Total Insumos</p>
      </div>
      
      <div class="kpi-card">
        <h3>{{ formatCurrency(stats!.valorTotalInventario) }}</h3>
        <p>Valor Inventario</p>
      </div>
      
      <div class="kpi-card">
        <h3>{{ stats!.insumosStockBajo }}</h3>
        <p>Stock Bajo</p>
      </div>
      
      <div class="kpi-card">
        <h3>{{ stats!.movimientosHoy }}</h3>
        <p>Movimientos Hoy</p>
      </div>
      
      <div class="kpi-card">
        <h3>{{ stats!.totalProveedores }}</h3>
        <p>Proveedores Activos</p>
      </div>
    </div>

    <div class="charts-section">
      <div class="chart-card">
        <h3>Stock por Categoría</h3>
        <div *ngIf="stockByCategory.length > 0; else noData">
          <div *ngFor="let category of stockByCategory" class="category-item">
            <span>{{ category.categoria }}: {{ category.cantidad }} items</span>
            <span>{{ formatCurrency(category.valorTotal) }}</span>
          </div>
        </div>
        <ng-template #noData>
          <p>No hay datos disponibles</p>
        </ng-template>
      </div>

      <div class="chart-card">
        <h3>Alertas de Stock Bajo</h3>
        <div *ngIf="alerts.length > 0; else noAlerts">
          <div *ngFor="let alert of alerts" class="alert-item">
            <span>{{ alert.nombre }}</span>
            <span>{{ alert.stockActual }}/{{ alert.stockMinimo }}</span>
            <span class="urgency">{{ alert.urgencia }}</span>
          </div>
        </div>
        <ng-template #noAlerts>
          <p>¡Todos los insumos tienen stock suficiente!</p>
        </ng-template>
      </div>
    </div>

    <div class="footer">
      <p>Última actualización: {{ formatDate(stats!.fechaActualizacion) }}</p>
    </div>
  </div>
</div>
